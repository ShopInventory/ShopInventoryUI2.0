import{a as q,b as G,c as st,d as mt,f as pt,g as Ge,h as dt,i as ct,j as ut,o as ft,p as _t}from"./chunk-BVLTSRUA.js";import"./chunk-FK6H3RFT.js";import{A as Ce,Aa as Be,B as he,Ba as qe,C as V,Ca as A,E as W,F as k,G as rt,H as R,K as F,L as ge,M as Se,N as J,V as xe,W as ye,X as ve,Y as De,Z as T,ca as Y,ia as we,j as de,ja as be,ka as Ee,la as Ie,ma as lt,na as P,oa as B,p as U,pa as Te,qa as Me,ra as Ne,s as at,sa as Ve,t as ce,ta as ke,u as g,ua as Fe,v as X,va as Ae,w as ue,wa as Le,x as ot,xa as Oe,y as fe,ya as Re,z as _e,za as Pe}from"./chunk-B7EITV4E.js";import{Cb as a,Db as n,Eb as p,Ec as me,Fb as S,Fc as Q,Gb as x,Gc as z,Ib as D,J as H,Jc as pe,Lb as C,Lc as N,Nb as h,Sb as w,Tb as b,Ua as ae,Ub as E,Wa as s,X as Je,Xb as I,Y as Ye,Yb as l,Zb as y,_b as O,ac as et,bc as tt,ca as v,cc as it,dc as nt,ec as oe,f as Xe,gc as re,hb as M,hc as le,ja as Ze,jc as se,ka as f,la as _,mb as u,sb as d,ta as Ke}from"./chunk-ISFN6XVN.js";import{a as ne}from"./chunk-EQDQRRRY.js";var L=class i{customer=new Xe;supplier=new Xe;customerCast=this.customer.asObservable();supplierCast=this.supplier.asObservable();constructor(){}addCustomer(t){return this.customer.next(t),this.customerCast}addSupplier(t){this.supplier.next(t)}getCustomerDetails(t){return t}static \u0275fac=function(e){return new(e||i)};static \u0275prov=Ye({token:i,factory:i.\u0275fac,providedIn:"root"})};function Dt(i,t){if(i&1){let e=D();a(0,"div",38)(1,"div",39),C("click",function(){f(e);let o=I(6),m=h(2);return _(m.triggerFileUpload(o))}),p(2,"i",40),a(3,"label",41),l(4,"Add Profile Picture"),n()(),a(5,"input",42,2),C("change",function(o){f(e);let m=h(2);return _(m.onFileSelected(o))}),n()()}}function wt(i,t){if(i&1&&p(0,"img",47),i&2){let e=h(3);d("src",e.images[0].src,ae)}}function bt(i,t){if(i&1){let e=D();a(0,"div",38)(1,"div",43),u(2,wt,1,1,"img",44),a(3,"div",45)(4,"i",46),C("click",function(){f(e);let o=h(2);return _(o.deleteImage())}),n()()()()}if(i&2){let e=h(2);s(2),d("ngIf",e.images[0])}}function Et(i,t){if(i&1&&(a(0,"mat-option",48),l(1),n()),i&2){let e=t.$implicit;d("value",e.value),s(),O(" ",e.status," ")}}function It(i,t){if(i&1){let e=D();a(0,"div",4)(1,"div",5)(2,"div",6)(3,"div",7)(4,"h3"),l(5,"Add Customer"),n(),a(6,"p",8),l(7,"Add details of your customer"),n()(),a(8,"div",9),p(9,"img",10),n()()(),a(10,"form",11),C("ngSubmit",function(){f(e);let o=h();return _(o.onSubmit())}),a(11,"div",12)(12,"mat-accordion",13,0)(14,"mat-expansion-panel",14),C("opened",function(){f(e);let o=h();return _(o.panelOpenState=!0)})("closed",function(){f(e);let o=h();return _(o.panelOpenState=!1)}),a(15,"mat-expansion-panel-header")(16,"mat-panel-title",15),l(17," Customer Information "),n()(),a(18,"div",16)(19,"div",17),u(20,Dt,7,0,"div",18)(21,bt,5,1,"div",19),n(),a(22,"div",20)(23,"mat-form-field",21)(24,"mat-label"),l(25,"Customer Name"),n(),p(26,"input",22),n()(),a(27,"div",20)(28,"mat-form-field",21)(29,"mat-label"),l(30,"Email Id"),n(),p(31,"input",23),n()(),a(32,"div",20)(33,"mat-form-field",21)(34,"mat-label"),l(35,"Phone No."),n(),p(36,"input",24),n()(),a(37,"div",20)(38,"mat-form-field",21)(39,"mat-label"),l(40,"City"),n(),p(41,"input",25),n()(),a(42,"div",20)(43,"mat-form-field",21)(44,"mat-label"),l(45,"Country"),n(),p(46,"input",26),n()(),a(47,"div",20)(48,"mat-form-field",21)(49,"mat-label"),l(50,"Date"),n(),a(51,"input",27),C("focus",function(){f(e);let o=I(53);return _(o.open())}),n()(),p(52,"mat-datepicker",null,1),n(),a(54,"div",20)(55,"mat-form-field",21)(56,"mat-label"),l(57,"Customer Status"),n(),a(58,"mat-select",28),u(59,Et,2,2,"mat-option",29),n()()(),a(60,"div",20)(61,"div",30)(62,"mat-form-field",31)(63,"mat-label"),l(64,"Customer Id"),n(),p(65,"input",32),a(66,"button",33),C("click",function(){f(e);let o=h();return _(o.generateCustomerCode())}),l(67,"Create Code"),n()()()(),a(68,"mat-form-field",21)(69,"mat-label"),l(70,"Address"),n(),p(71,"textarea",34),n(),a(72,"mat-form-field",21)(73,"mat-label"),l(74,"Description"),n(),p(75,"textarea",35),n()()()()(),a(76,"div",36)(77,"button",37),l(78,"Submit"),n()()()()}if(i&2){let e=I(53),r=h();s(10),d("formGroup",r.addCustomerForm),s(4),d("expanded",!0),s(6),d("ngIf",r.images.length===0),s(),d("ngIf",r.images.length>0),s(30),d("matDatepicker",e),s(8),d("ngForOf",r.customerStatusOptions),s(18),d("disabled",!r.isAddCustomerFormValid)}}var ee=class i{dialogRef=v(we);data=v(be);router=v(de);formBuilder=v(he);peoplesService=v(L);cd=v(q);loader=v(G);accordion;panelOpenState=!1;id;index;selectedCustomer;addCustomerForm;images=[];customerStatusOptions=ft;constructor(){this.dialogRef.disableClose=!0,this.id=this.data.id,this.index=this.data.index,this.selectedCustomer=this.data.customer}ngOnInit(){this.initializeForm(),this.setValues()}initializeForm(){this.addCustomerForm=this.formBuilder.group({customerName:["",g.required],email:["",g.required],phone:["",g.required],city:["",g.required],country:["",g.required],address:["",g.required],customerAddDate:["",g.required],customerStatus:["",g.required],customerId:["",g.required],customerDescription:["",g.required]})}setValues(){this.id=="edit-customer"&&(this.editCustomer(this.selectedCustomer),console.log("index",this.index),console.log("selectedCustomer",this.selectedCustomer))}get isAddCustomerFormValid(){return this.addCustomerForm.valid}generateCustomerCode(){let t=this.addCustomerForm;if(!t)throw new Error("Form not initialized");let e=t.get("customerName")?.value;if(!e)throw new Error("Form values missing or invalid");e=e.substring(0,3).toUpperCase().padEnd(3,"IN");let r=t.get("phone")?.value.toString().slice(-4),o=new Date,m=o.getTime().toString().slice(-2),c=o.toLocaleString("default",{month:"long"}).toUpperCase(),$=c.substring(0,2),j=c.slice(-1),Z=`${e}-${$}-${m}-${r}-${j}`;t.get("customerId")?.setValue(Z),console.log("Generated Customer Code:",Z)}editCustomer(t){this.addCustomerForm.patchValue(ne({},t)),t?.profileImage&&Array.isArray(t?.profileImage)?this.images=t?.profileImage.map(e=>({src:e.src,name:e.name,size:e.size,type:e.type})):this.images=[]}onSubmit(){console.log("addCustomerForm Value",this.addCustomerForm?.value);let t=this.addCustomerForm?.value;this.images.length>0&&(t.profileImage=this.images),this.cd.openConfirmModal("Are you sure you want to add customer details?",()=>{this.loader.startLoader(),this.peoplesService.addCustomer(t)}),this.dialogRef.close({index:this.index===0?this.index:this.index?this.index:""})}getFormValidationErrors(){let t=[];return Object.keys(this.addCustomerForm?.controls).forEach(e=>{let r=this.addCustomerForm?.get(e)?.errors;r&&Object.keys(r).forEach(o=>{t.push({control:e,error:o,value:r[o]})})}),t}triggerFileUpload(t){t.click()}onFileSelected(t){let e=t.target.files[0],r=e.type.toLowerCase();if(e){if(r!=="image/jpeg"&&r!=="image/jpg"){alert("Only JPG or JPEG file format is allowed."),t.target.value=null;return}let o=new FileReader;o.onload=m=>{let c=m.target.result;console.log("Base64 Image:",c),this.images=[],this.images.push({src:c,name:e.name,size:(e.size/1024).toFixed(2),type:e.type})},o.readAsDataURL(e)}t.target.value=""}deleteImage(){this.images=[]}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=M({type:i,selectors:[["app-create-customer-dialog"]],viewQuery:function(e,r){if(e&1&&w(T,5),e&2){let o;b(o=E())&&(r.accordion=o.first)}},decls:1,vars:1,consts:[["accordion","matAccordion"],["picker",""],["fileInput",""],["class","common-dialog-modal",4,"ngIf"],[1,"common-dialog-modal"],[1,"section-card","rounded","p-2"],[1,"d-flex","align-items-start","justify-content-between"],[1,"p-2"],[1,"f-12","medium-font"],["mat-dialog-close",""],["src","./assets/images/dialogIcons/cross.svg","alt",""],[3,"ngSubmit","formGroup"],[1,"common-custom-expansion","content-height","mt-2"],["multi","",1,"example-headers-align"],[3,"opened","closed","expanded"],[1,""],[1,"row"],[1,"d-flex","m-0","mb-4"],["class"," d-flex flex-column align-items-start file-uploader-container",4,"ngIf"],["class","d-flex flex-column align-items-start file-uploader-container",4,"ngIf"],[1,"col-lg-6","col-xl-6"],["appearance","outline","color","primary",1,"w-100"],["matInput","","formControlName","customerName"],["matInput","","formControlName","email"],["matInput","","formControlName","phone"],["matInput","","formControlName","city"],["matInput","","formControlName","country"],["matInput","","readonly","","formControlName","customerAddDate",3,"focus","matDatepicker"],["formControlName","customerStatus"],[3,"value",4,"ngFor","ngForOf"],[1,"category-code-mat-form-field"],["appearance","outline","color","primary",1,"w-100","rounded-end-0","relative-field"],["type","text","matInput","","placeholder","Generate Customer Code","formControlName","customerId",1,"cat-code-input"],["type","button","mat-raised-button","","color","primary",1,"create-cat-code-button",3,"click"],["matInput","","formControlName","address"],["matInput","","formControlName","customerDescription"],[1,"d-flex","justify-content-end","align-items-center","py-2"],["type","submit","mat-raised-button","","color","primary",3,"disabled"],[1,"d-flex","flex-column","align-items-start","file-uploader-container"],[1,"d-flex","flex-column","align-items-center","justify-content-center","upload-lable-text","btn",3,"click"],[1,"bi","bi-plus-square"],["for","inputGroupFile"],["type","file","accept",".jpg, .jpeg","hidden","",1,"form-control","file-upload-input","hidden",3,"change"],[1,"upload-lable-text","btn"],["alt","Image Preview","class","image-preview",3,"src",4,"ngIf"],[1,"text-end","delete-container"],[1,"bi","bi-x","delete-icon",3,"click"],["alt","Image Preview",1,"image-preview",3,"src"],[3,"value"]],template:function(e,r){e&1&&u(0,It,79,7,"div",3),e&2&&d("ngIf",r.id=="add-customer"||r.id=="edit-customer")},dependencies:[N,Q,z,A,fe,ce,X,ue,R,U,ge,Se,Ie,T,ye,ve,De,k,V,F,J,_e,Ce],styles:[".cat-code-input[_ngcontent-%COMP%]{padding-right:120px}.create-cat-code-button[_ngcontent-%COMP%]{position:absolute;top:50%;right:-16px;transform:translateY(-50%);height:100%;line-height:1;z-index:2;border-radius:0 2px 2px 0}.content-height[_ngcontent-%COMP%]{overflow:auto;max-height:60vh}.relative-field[_ngcontent-%COMP%]{position:relative}"]})};var kt=()=>[5,15,25,50,100],Ft=(i,t)=>({"status-button-active":i,"status-button-inactive":t});function At(i,t){i&1&&(a(0,"th",42),l(1,"Sr. No."),n())}function Lt(i,t){if(i&1&&(a(0,"td",43)(1,"p",44),l(2),n()()),i&2){let e=t.index;s(2),y(e+1)}}function Ot(i,t){i&1&&(a(0,"th",42),l(1,"Customer Name"),n())}function Rt(i,t){if(i&1&&(a(0,"td",43)(1,"p",44),l(2),n()()),i&2){let e=t.$implicit;s(2),y(e.customerName)}}function Pt(i,t){i&1&&(a(0,"th",42),l(1,"Customer Id"),n())}function Bt(i,t){if(i&1&&(a(0,"td",43)(1,"p",44),l(2),n()()),i&2){let e=t.$implicit;s(2),y(e.customerId)}}function qt(i,t){i&1&&(a(0,"th",42),l(1,"Email Id"),n())}function Gt(i,t){if(i&1&&(a(0,"td",43)(1,"p",44),l(2),n()()),i&2){let e=t.$implicit;s(2),y(e.email)}}function $t(i,t){i&1&&(a(0,"th",42),l(1,"Phone No."),n())}function jt(i,t){if(i&1&&(a(0,"td",43)(1,"p",44),l(2),n()()),i&2){let e=t.$implicit;s(2),y(e.phone)}}function Ht(i,t){i&1&&(a(0,"th",42),l(1,"Address"),n())}function Qt(i,t){if(i&1&&(a(0,"td",43)(1,"p",44),l(2),n()()),i&2){let e=t.$implicit;s(2),y(e.phone)}}function zt(i,t){i&1&&(a(0,"th",42),l(1,"City"),n())}function Ut(i,t){if(i&1&&(a(0,"td",43)(1,"p",44),l(2),n()()),i&2){let e=t.$implicit;s(2),y(e.city)}}function Xt(i,t){i&1&&(a(0,"th",42),l(1,"Country"),n())}function Wt(i,t){if(i&1&&(a(0,"td",43)(1,"p",44),l(2),n()()),i&2){let e=t.$implicit;s(2),y(e.country)}}function Jt(i,t){i&1&&(a(0,"th",45),l(1,"Created"),n())}function Yt(i,t){if(i&1&&(a(0,"td",43)(1,"p",44),l(2),le(3,"date"),n()()),i&2){let e=t.$implicit;s(2),y(se(3,1,e.customerAddDate,"dd/MM/yyyy"))}}function Zt(i,t){i&1&&(a(0,"th",45),l(1,"Status"),n())}function Kt(i,t){if(i&1&&(a(0,"td",43)(1,"span",46),l(2),n()()),i&2){let e=t.$implicit;s(),d("ngClass",re(2,Ft,e.customerStatus=="1",e.customerStatus=="0")),s(),O(" ",e.customerStatus=="1"?"Active":"InActive"," ")}}function ei(i,t){i&1&&(a(0,"th",47),l(1,"Action"),n())}function ti(i,t){if(i&1){let e=D();a(0,"td",43)(1,"div",48)(2,"img",49),C("click",function(){let o=f(e).index,m=h();return _(m.editCustomer(o,"edit-customer"))}),n(),a(3,"img",50),C("click",function(){let o=f(e).index,m=h();return _(m.deleteCustomer(o))}),n()()()}}function ii(i,t){i&1&&p(0,"tr",51)}function ni(i,t){i&1&&p(0,"tr",52)}function ai(i,t){i&1&&(a(0,"tr",53)(1,"td",54),l(2,"No data matching the filter"),n()())}var te=class i{dialog=v(Ee);peoplesService=v(L);loader=v(G);cd=v(q);accordion;paginator;sort;customersDataSource=new qe;customersDisplayedColumns=["srNo","customerName","customerId","email","phone","address","city","country","created","status","action"];panelOpenState=!1;customersData=[];constructor(){}ngOnInit(){}ngAfterViewInit(){this.customersDataSource.paginator=this.paginator,this.customersDataSource.sort=this.sort}filterApply(t){let e=t.target.value;this.customersDataSource.filter=e.trim().toLocaleLowerCase()}setValues(){this.getCustomerDetails()}getCustomerDetails(t){let e={customerId:t};this.loader.startLoader(),this.peoplesService.getCustomerDetails(e).subscribe({next:r=>{this.loader.stopLoader(),console.log("Data",r?.data),Array.isArray(r?.data)?this.customersData=r?.data:this.customersData.some(m=>m.categoryCode==r?.data.categoryCode)||this.customersData.push(r?.data),console.log("customersData",this.customersData),console.log("customersDataSource",this.customersDataSource.data),this.customersDataSource.data=[...this.customersData]},error:r=>{this.loader.stopLoader(),this.cd.openErrorModal("CONNECTION_TIME_OUT","Error")}})}addCustomer(t){this.dialog.open(ee,{panelClass:"medium-dialog",autoFocus:!1,data:{id:t}}).afterClosed().subscribe(r=>{this.peoplesService?.customerCast?.pipe(H()).subscribe(o=>{console.log("Data",o),Array.isArray(o)?this.customersData=o:this.customersData.some(c=>c.customerId==o.customerId)||this.customersData.push(o),console.log("customersData",this.customersData),console.log("customersDataSource",this.customersDataSource.data),this.loader.stopLoader(),this.cd.openSuccessModal("Successful !"),this.customersDataSource.data=[...this.customersData]})})}editCustomer(t,e){let r=this.customersData[t];this.dialog.open(ee,{panelClass:"medium-dialog",autoFocus:!1,data:{id:e,customer:r,index:t}}).afterClosed().subscribe(m=>{this.peoplesService?.customerCast?.pipe(H()).subscribe(c=>{this.customersData=[],Array.isArray(c)?this.customersData=c:this.customersData.some(j=>j.customerId==c.customerId)||this.customersData.push(c),this.customersDataSource.data[m.index]=c,this.customersDataSource._updateChangeSubscription(),this.loader.stopLoader(),this.cd.openSuccessModal("Successful !")})})}deleteCustomer(t){this.cd.openConfirmModal("Are you sure you want to delete this customer?",()=>{this.customersData.splice(t,1),this.customersDataSource.data=[...this.customersData],this.customersDataSource._updateChangeSubscription()})}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=M({type:i,selectors:[["app-customers"]],viewQuery:function(e,r){if(e&1&&(w(T,5),w(P,5),w(B,5)),e&2){let o;b(o=E())&&(r.accordion=o.first),b(o=E())&&(r.paginator=o.first),b(o=E())&&(r.sort=o.first)}},decls:69,vars:7,consts:[["input",""],[1,"cardWithShadow"],[1,"section-card","rounded","p-3"],[1,"d-flex","align-items-center","justify-content-between"],[1,"p-2"],[1,"f-16","medium-font"],[1,"breadcrumb-icon"],["src","/assets/images/customers.svg","alt","breadcrumb"],[1,"customer-table-container"],[1,"d-flex","flex-wrap","align-items-center","justify-content-between","mt-3"],[1,"col-12","col-md-6","col-lg-6","col-xl-6","mb-2"],["appearance","outline",1,"w-100"],["matInput","","placeholder","Search Customer Name, Email Id, Phone No. etc",3,"keyup"],["matSuffix","",1,"search-icon-color"],[1,"d-flex","flex-wrap","justify-content-md-end"],["mat-raised-button","",1,"mx-1","my-1"],[1,"bi","bi-filetype-pdf","f-20","text-danger"],[1,"bi","bi-filetype-xls","f-20","text-success"],[1,"bi","bi-printer","f-20","text-primary"],["mat-raised-button","","color","primary",1,"mx-1","my-1",3,"click"],[1,"common-custom-expansion","my-3"],[1,""],["mat-table","","matSort","","matSortDirection","desc","mat-table-auto-rows","",1,"",3,"dataSource"],["matColumnDef","srNo"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","customerName"],["matColumnDef","customerId"],["matColumnDef","email"],["matColumnDef","phone"],["matColumnDef","address"],["matColumnDef","city"],["matColumnDef","country"],["matColumnDef","created"],["mat-header-cell","","mat-sort-header","","mat-sort-header","",4,"matHeaderCellDef"],["matColumnDef","status"],["matColumnDef","action"],["mat-header-cell","","mat-sort-header","","class","sticky-action-column",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],[3,"length","pageSize","pageSizeOptions"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],[1,"m-0"],["mat-header-cell","","mat-sort-header","","mat-sort-header",""],[3,"ngClass"],["mat-header-cell","","mat-sort-header","",1,"sticky-action-column"],[1,"d-flex","justify-content-center","align-items-center","gap-2"],["src","./assets/icons/dwnld_icons/icon_edit.svg","alt","edit-icon",1,"action-icon",3,"click"],["src","./assets/icons/dwnld_icons/icon_delete.svg","alt","delete-icon",1,"action-icon",3,"click"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","4",1,"mat-cell"]],template:function(e,r){if(e&1){let o=D();a(0,"mat-card",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"h1"),l(5,"Customers"),n(),a(6,"p",5),l(7,"Manage your customers"),n()(),a(8,"div",6),p(9,"img",7),n()()(),a(10,"div",8)(11,"div",9)(12,"div",10)(13,"mat-form-field",11)(14,"mat-label"),l(15,"Search"),n(),a(16,"input",12,0),C("keyup",function(c){return f(o),_(r.filterApply(c))}),n(),a(18,"mat-icon",13),l(19,"search"),n()()(),a(20,"div",14)(21,"button",15),p(22,"i",16),n(),a(23,"button",15),p(24,"i",17),n(),a(25,"button",15),p(26,"i",18),n(),a(27,"button",19),C("click",function(){return f(o),_(r.addCustomer("add-customer"))}),l(28," Add Customer "),n()()(),a(29,"div",20)(30,"div",21)(31,"table",22),S(32,23),u(33,At,2,0,"th",24)(34,Lt,3,1,"td",25),x(),S(35,26),u(36,Ot,2,0,"th",24)(37,Rt,3,1,"td",25),x(),S(38,27),u(39,Pt,2,0,"th",24)(40,Bt,3,1,"td",25),x(),S(41,28),u(42,qt,2,0,"th",24)(43,Gt,3,1,"td",25),x(),S(44,29),u(45,$t,2,0,"th",24)(46,jt,3,1,"td",25),x(),S(47,30),u(48,Ht,2,0,"th",24)(49,Qt,3,1,"td",25),x(),S(50,31),u(51,zt,2,0,"th",24)(52,Ut,3,1,"td",25),x(),S(53,32),u(54,Xt,2,0,"th",24)(55,Wt,3,1,"td",25),x(),S(56,33),u(57,Jt,2,0,"th",34)(58,Yt,4,4,"td",25),x(),S(59,35),u(60,Zt,2,0,"th",34)(61,Kt,3,5,"td",25),x(),S(62,36),u(63,ei,2,0,"th",37)(64,ti,4,0,"td",25),x(),u(65,ii,1,0,"tr",38)(66,ni,1,0,"tr",39)(67,ai,3,0,"tr",40),n()(),p(68,"mat-paginator",41),n()()()}e&2&&(s(31),d("dataSource",r.customersDataSource),s(34),d("matHeaderRowDef",r.customersDisplayedColumns),s(),d("matRowDefColumns",r.customersDisplayedColumns),s(2),d("length",100)("pageSize",5)("pageSizeOptions",oe(6,kt)))},dependencies:[N,me,pe,A,R,xe,k,V,W,Y,F,P,B,Te,Me,Ve,Le,ke,Ne,Oe,Fe,Ae,Re,Pe,Be],styles:[".customer-table-container[_ngcontent-%COMP%]     .mat-mdc-form-field-subscript-wrapper.mat-mdc-form-field-bottom-align{display:none!important}"]})};var oi=["searchTextBox"];function ri(i,t){if(i&1){let e=D();a(0,"div",10),C("click",function(){f(e);let o=h(),m=I(10);return _(o.clearSearchBox(m,"dataItemsList"))}),a(1,"mat-icon",11),l(2,"close"),n()()}}function li(i,t){if(i&1){let e=D();a(0,"mat-checkbox",12),C("change",function(o){f(e);let m=h();return _(m.onSelectAllChange(o))}),l(1,"Select All"),n()}if(i&2){let e=h();d("checked",e.checkIfAllChecked())}}function si(i,t){i&1&&(a(0,"div")(1,"p",13),l(2,"No results found!"),n()())}function mi(i,t){if(i&1){let e=D();a(0,"mat-option",14),C("onSelectionChange",function(o){let m=f(e).$implicit,c=h();return _(c.onSelectionChangeVal(o,m))}),l(1),n()}if(i&2){let e=t.$implicit,r=h();d("disabled",r.isDisabled(e))("matTooltip",r.displayText(e))("value",r.fValue?e[r.fValue]:e),s(),y(r.displayText(e))}}var ze=class i{dataItems=[];selectedItem;labelField;fValue;fDisplay;displayTextFn;isOptionDisabled;appearanceType="outline";isMultiple=!1;showSelectAll=!1;onSelectionChangeEvent=new Ke;searchTextBox;selectedRow;selectedDataList={dataItemsList:[]};dataList={dataItemsList:[]};onChange=()=>{};onTouched=()=>{};constructor(){}ngOnInit(){this.dataList.dataItemsList=Array.isArray(this.dataItems)?this.dataItems:[],this.selectedDataList.dataItemsList=[...this.dataList.dataItemsList]}ngOnChanges(t){t.dataItems&&(t.dataItems.firstChange||(Array.isArray(t?.dataItems?.currentValue)?(this.dataItems=[...t?.dataItems?.currentValue],this.dataList.dataItemsList=this.dataItems,this.selectedDataList.dataItemsList=[...this.dataList.dataItemsList]):(this.dataItems=[],this.dataList.dataItemsList=[],this.selectedDataList.dataItemsList=[])))}writeValue(t){}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}ondropDownChange(t){this.onSelectionChangeEvent.emit({value:t,selectedRow:this.selectedRow}),this.onChange(t)}filterApply(t,e,r){let o=t.target.value.toLowerCase();this.selectedDataList[e]=this.dataList[e].filter(m=>r?m[r].toLowerCase().includes(o):typeof this.displayTextFn=="function"?this.displayTextFn(m).toLowerCase().includes(o):m.toLowerCase().includes(o))}clearSearchBox(t,e){t.value="",this.selectedDataList[e]=[...this.dataList[e]]}openedChange(t,e,r){e.value="",this.selectedDataList[r]=[...this.dataList[r]],t===!0&&e.focus()}onSelectionChangeVal(t,e){t.isUserInput&&(console.log("event::",t),console.log("row::",e),this.selectedRow=e)}displayText(t){return typeof this.displayTextFn=="function"?this.displayTextFn(t):this.fDisplay?t[this.fDisplay]:t}isDisabled(t){return typeof this.isOptionDisabled=="function"?this.isOptionDisabled(t,this.selectedItem):!1}checkIfAllChecked(){return!!(Array.isArray(this.selectedItem)&&this.selectedDataList.dataItemsList.length==this.selectedItem.length)}onSelectAllChange(t){t.checked?(this.fValue?this.selectedItem=this.selectedDataList.dataItemsList.map(e=>e[this.fValue]):this.selectedItem=this.selectedDataList.dataItemsList.map(e=>e),this.selectedRow=this.selectedDataList.dataItemsList.map(e=>e)):(this.fValue?this.selectedItem="":this.selectedItem=[],this.selectedRow=[]),this.onSelectionChangeEvent.emit({value:this.selectedItem,selectedRow:this.selectedRow}),this.onChange(this.selectedItem)}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=M({type:i,selectors:[["app-generic-searchable-dropdown"]],viewQuery:function(e,r){if(e&1&&w(oi,5),e&2){let o;b(o=E())&&(r.searchTextBox=o.first)}},inputs:{dataItems:"dataItems",selectedItem:"selectedItem",labelField:"labelField",fValue:"fValue",fDisplay:"fDisplay",displayTextFn:"displayTextFn",isOptionDisabled:"isOptionDisabled",appearanceType:"appearanceType",isMultiple:"isMultiple",showSelectAll:"showSelectAll"},outputs:{onSelectionChangeEvent:"onSelectionChangeEvent"},features:[nt([{provide:at,useExisting:Je(()=>i),multi:!0}]),Ze],decls:16,vars:8,consts:[["searchTextBox",""],[1,"w-100",3,"appearance"],["disableOptionCentering","","panelClass","mat-select-panel generic-custom-multi-select-panel",3,"ngModelChange","openedChange","multiple","ngModel"],["appearance","outline",1,"w-100","p-2","pb-0","mt-2"],["matInput","","type","text","placeholder","Type here to search...",3,"keyup","keydown"],["matSuffix","",3,"click",4,"ngIf"],["color","primary","class","ps-4 py-2",3,"checked","change",4,"ngIf"],[4,"ngIf"],[1,"generic-custom-mat-option","overflow-auto"],["matTooltipPosition","right",3,"disabled","matTooltip","value","onSelectionChange",4,"ngFor","ngForOf"],["matSuffix","",3,"click"],[1,"search-icon-color","cursor-pointer"],["color","primary",1,"ps-4","py-2",3,"change","checked"],[1,"bodytext-color","m-0","pt-0","p-2","f-16"],["matTooltipPosition","right",3,"onSelectionChange","disabled","matTooltip","value"]],template:function(e,r){if(e&1){let o=D();a(0,"p"),l(1,"generic-searchable-dropdown works!"),n(),a(2,"mat-form-field",1)(3,"mat-label"),l(4),n(),a(5,"mat-select",2),it("ngModelChange",function(c){return f(o),tt(r.selectedItem,c)||(r.selectedItem=c),_(c)}),C("ngModelChange",function(c){return f(o),_(r.ondropDownChange(c))})("openedChange",function(c){f(o);let $=I(10);return _(r.openedChange(c,$,"dataItemsList"))}),a(6,"mat-form-field",3)(7,"mat-label"),l(8,"Search"),n(),a(9,"input",4,0),C("keyup",function(c){return f(o),_(r.filterApply(c,"dataItemsList",r.fDisplay))})("keydown",function(c){return f(o),_(c.stopPropagation())}),n(),u(11,ri,3,0,"div",5),n(),u(12,li,2,1,"mat-checkbox",6)(13,si,3,0,"div",7),a(14,"div",8),u(15,mi,2,4,"mat-option",9),n()()()}if(e&2){let o=I(10);s(2),d("appearance",r.appearanceType),s(2),y(r.labelField),s(),d("multiple",r.isMultiple),et("ngModel",r.selectedItem),s(6),d("ngIf",o.value),s(),d("ngIf",r.showSelectAll),s(),d("ngIf",r.selectedDataList.dataItemsList.length===0),s(2),d("ngForOf",r.selectedDataList.dataItemsList)}},dependencies:[N,Q,z,A,X,ot,U,rt,k,V,W,Y,F,J,lt],encapsulation:2})};function pi(i,t){if(i&1){let e=D();a(0,"div",47)(1,"div",48),C("click",function(){f(e);let o=I(6),m=h(2);return _(m.triggerFileUpload(o))}),p(2,"i",49),a(3,"label",50),l(4,"Add Profile Picture"),n()(),a(5,"input",51,2),C("change",function(o){f(e);let m=h(2);return _(m.onFileSelected(o))}),n()()}}function di(i,t){if(i&1&&p(0,"img",56),i&2){let e=h(3);d("src",e.images[0].src,ae)}}function ci(i,t){if(i&1){let e=D();a(0,"div",47)(1,"div",52),u(2,di,1,1,"img",53),a(3,"div",54)(4,"i",55),C("click",function(){f(e);let o=h(2);return _(o.deleteImage())}),n()()()()}if(i&2){let e=h(2);s(2),d("ngIf",e.images[0])}}function ui(i,t){if(i&1&&(a(0,"mat-option",57),l(1),n()),i&2){let e=t.$implicit;d("value",e.value),s(),O(" ",e.status," ")}}function fi(i,t){if(i&1){let e=D();a(0,"div",4)(1,"div",5)(2,"div",6)(3,"div",7)(4,"h3"),l(5,"Add Supplier"),n(),a(6,"p",8),l(7,"Add details of your supplier"),n()(),a(8,"div",9),p(9,"img",10),n()()(),a(10,"form",11),C("ngSubmit",function(){f(e);let o=h();return _(o.onSubmit())}),a(11,"div",12)(12,"mat-accordion",13,0)(14,"mat-expansion-panel",14),C("opened",function(){f(e);let o=h();return _(o.panelOpenState=!0)})("closed",function(){f(e);let o=h();return _(o.panelOpenState=!1)}),a(15,"mat-expansion-panel-header")(16,"mat-panel-title"),l(17," Supplier Personal Information "),n()(),a(18,"div",15)(19,"div",16),u(20,pi,7,0,"div",17)(21,ci,5,1,"div",18),n(),a(22,"div",19)(23,"mat-form-field",20)(24,"mat-label"),l(25,"Supplier Name"),n(),p(26,"input",21),n()(),a(27,"div",19)(28,"mat-form-field",20)(29,"mat-label"),l(30,"Name of Firm/Company"),n(),p(31,"input",22),n()(),a(32,"div",19)(33,"mat-form-field",20)(34,"mat-label"),l(35,"Email Id"),n(),p(36,"input",23),n()(),a(37,"div",19)(38,"mat-form-field",20)(39,"mat-label"),l(40,"Phone No."),n(),p(41,"input",24),n()(),a(42,"div",19)(43,"mat-form-field",20)(44,"mat-label"),l(45,"GST No."),n(),p(46,"input",25),n()(),a(47,"div",19)(48,"mat-form-field",20)(49,"mat-label"),l(50,"Pan No."),n(),p(51,"input",26),n()(),a(52,"div",19)(53,"mat-form-field",20)(54,"mat-label"),l(55,"City"),n(),p(56,"input",27),n()(),a(57,"div",19)(58,"app-generic-searchable-dropdown",28),C("onSelectionChangeEvent",function(o){f(e);let m=h();return _(m.onStateIdChange(o))}),n()(),a(59,"div",19)(60,"mat-form-field",20)(61,"mat-label"),l(62,"Country"),n(),p(63,"input",29),n()(),a(64,"div",19)(65,"mat-form-field",20)(66,"mat-label"),l(67,"Date"),n(),a(68,"input",30),C("focus",function(){f(e);let o=I(70);return _(o.open())}),n()(),p(69,"mat-datepicker",null,1),n(),a(71,"div",19)(72,"mat-form-field",20)(73,"mat-label"),l(74,"Supplier Status"),n(),a(75,"mat-select",31),u(76,ui,2,2,"mat-option",32),n()()(),a(77,"div",19)(78,"div",33)(79,"mat-form-field",34)(80,"mat-label"),l(81,"Supplier Id"),n(),p(82,"input",35),a(83,"button",36),C("click",function(){f(e);let o=h();return _(o.generateSupplierCode())}),l(84,"Create Code"),n()()()(),a(85,"mat-form-field",20)(86,"mat-label"),l(87,"Address"),n(),p(88,"textarea",37),n(),a(89,"mat-form-field",20)(90,"mat-label"),l(91,"Description"),n(),p(92,"textarea",38),n()()(),a(93,"mat-expansion-panel",14),C("opened",function(){f(e);let o=h();return _(o.panelOpenState=!0)})("closed",function(){f(e);let o=h();return _(o.panelOpenState=!1)}),a(94,"mat-expansion-panel-header")(95,"mat-panel-title"),l(96," Supplier Bank Information "),n()(),a(97,"div",15)(98,"div",19)(99,"mat-form-field",20)(100,"mat-label"),l(101,"Beneficiary Name"),n(),p(102,"input",39),n()(),a(103,"div",19)(104,"mat-form-field",20)(105,"mat-label"),l(106,"IFSC Code"),n(),p(107,"input",40),n()(),a(108,"div",19)(109,"mat-form-field",20)(110,"mat-label"),l(111,"Bank Name"),n(),p(112,"input",41),n()(),a(113,"div",19)(114,"mat-form-field",20)(115,"mat-label"),l(116,"Branch Name"),n(),p(117,"input",42),n()(),a(118,"div",19)(119,"mat-form-field",20)(120,"mat-label"),l(121,"Bank Account No."),n(),p(122,"input",43),n()(),a(123,"div",19)(124,"mat-form-field",20)(125,"mat-label"),l(126,"Confirm Account No."),n(),p(127,"input",44),n()()()()()(),a(128,"div",45)(129,"button",46),l(130,"Save"),n()()()()}if(i&2){let e,r=I(70),o=h();s(10),d("formGroup",o.addSupplierForm),s(4),d("expanded",!0),s(6),d("ngIf",o.images.length===0),s(),d("ngIf",o.images.length>0),s(37),d("dataItems",o.statesList)("labelField","State")("selectedItem",((e=o.addSupplierForm.get("state"))==null?null:e.value)||o.newStateId),s(10),d("matDatepicker",r),s(8),d("ngForOf",o.supplierStatusOptions),s(17),d("expanded",!0),s(36),d("disabled",o.addSupplierForm.invalid)}}var ie=class i{dialogRef=v(we);data=v(be);router=v(de);formBuilder=v(he);peoplesService=v(L);cd=v(q);loader=v(G);accordion;panelOpenState=!1;id;index;selectedSupplier;newStateId;newStateName;addSupplierForm;images=[];statesList=dt;banksList=ct;branchesList=ut;supplierStatusOptions=_t;constructor(){this.dialogRef.disableClose=!0,this.id=this.data.id,this.index=this.data.index,this.selectedSupplier=this.data.supplier}ngOnInit(){this.initializeForm(),this.setValues()}initializeForm(){this.addSupplierForm=this.formBuilder.group({supplierName:["",g.required],supplierCompanyName:["",g.required],email:["",g.required],phone:["",g.required],gstNo:["",g.required],panNo:["",g.required],city:["",g.required],state:["",g.required],country:["",g.required],address:["",g.required],supplierAddDate:["",g.required],supplierStatus:["",g.required],supplierId:["",g.required],supplierDescription:["",g.required],supplierBankBenificiaryName:["",g.required],supplierBankIfscCode:["",[g.required,g.pattern(/^[A-Z]{4}0[A-Z0-9]{6}$/)]],supplierBankName:["",g.required],supplierBankBranchName:["",g.required],supplierBankAccountNo:["",[g.required,g.maxLength(17)]],confirmBankAccountNo:["",[g.required,this.matchingAccounts.bind(this)]]})}setValues(){this.id=="edit-supplier"&&(this.editSupplier(this.selectedSupplier),console.log("index",this.index))}get isAddSupplierFormValid(){return this.addSupplierForm.valid}generateSupplierCode(){let t=this.addSupplierForm;if(!t)throw new Error("Form not initialized");let e=t.get("supplierName")?.value;if(!e)throw new Error("Form values missing or invalid");e=e.substring(0,3).toUpperCase().padEnd(3,"IN");let r=t.get("phone")?.value.toString().slice(-4),o=new Date,m=o.getTime().toString().slice(-2),c=o.toLocaleString("default",{month:"long"}).toUpperCase(),$=c.substring(0,2),j=c.slice(-1),Z=`${e}-${$}-${m}-${r}-${j}`;t.get("supplierId")?.setValue(Z),console.log("Generated Supplier Code:",Z)}editSupplier(t){this.addSupplierForm.patchValue(ne({},t)),t?.profileImage&&Array.isArray(t?.profileImage)?this.images=t?.profileImage.map(e=>({src:e.src,name:e.name,size:e.size,type:e.type})):this.images=[]}onSubmit(){console.log("addSupplierForm Value",this.addSupplierForm?.value);let t=this.addSupplierForm?.value;this.images.length>0&&(t.profileImage=this.images),this.cd.openConfirmModal("Are you sure you want to add supplier details?",()=>{this.loader.startLoader(),this.peoplesService.addSupplier(t)}),this.dialogRef.close({index:this.index===0?this.index:this.index?this.index:""})}matchingAccounts(t){let e=this.addSupplierForm?.get("supplierBankAccountNo")?.value,r=t.value;return e!==r?{mismatch:!0}:null}getFormValidationErrors(){let t=[];return Object.keys(this.addSupplierForm?.controls).forEach(e=>{let r=this.addSupplierForm?.get(e)?.errors;r&&Object.keys(r).forEach(o=>{t.push({control:e,error:o,value:r[o]})})}),t}triggerFileUpload(t){t.click()}onFileSelected(t){let e=t.target.files[0],r=e.type.toLowerCase();if(e){if(r!=="image/jpeg"&&r!=="image/jpg"){alert("Only JPG or JPEG file format is allowed."),t.target.value=null;return}let o=new FileReader;o.onload=m=>{let c=m.target.result;console.log("Base64 Image:",c),this.images=[],this.images.push({src:c,name:e.name,size:(e.size/1024).toFixed(2),type:e.type})},o.readAsDataURL(e)}t.target.value=""}deleteImage(){this.images=[]}onStateIdChange(t){console.log("event SubServiceCategoryIdChange",t),this.newStateId=t.selectedRow.stateId,this.newStateName=t.selectedRow.stateNameEn}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=M({type:i,selectors:[["app-create-supplier-dialog"]],viewQuery:function(e,r){if(e&1&&w(T,5),e&2){let o;b(o=E())&&(r.accordion=o.first)}},decls:1,vars:1,consts:[["accordion","matAccordion"],["picker",""],["fileInput",""],["class","common-dialog-modal",4,"ngIf"],[1,"common-dialog-modal"],[1,"section-card","rounded","p-2"],[1,"d-flex","align-items-start","justify-content-between"],[1,"p-2"],[1,"f-12","medium-font"],["mat-dialog-close",""],["src","./assets/images/dialogIcons/cross.svg","alt",""],[3,"ngSubmit","formGroup"],[1,"common-custom-expansion","content-height","mt-2"],["multi","",1,"example-headers-align"],[3,"opened","closed","expanded"],[1,"row"],[1,"d-flex","m-0","mb-4"],["class"," d-flex flex-column align-items-start file-uploader-container",4,"ngIf"],["class","d-flex flex-column align-items-start file-uploader-container",4,"ngIf"],[1,"col-lg-6","col-xl-6"],["appearance","outline","color","primary",1,"w-100"],["matInput","","formControlName","supplierName"],["matInput","","formControlName","supplierCompanyName"],["matInput","","formControlName","email"],["matInput","","formControlName","phone"],["matInput","","formControlName","gstNo"],["matInput","","formControlName","panNo"],["matInput","","formControlName","city"],["formControlName","state","fValue","stateId","fDisplay","stateNameEn",3,"onSelectionChangeEvent","dataItems","labelField","selectedItem"],["matInput","","formControlName","country"],["matInput","","readonly","","formControlName","supplierAddDate",3,"focus","matDatepicker"],["formControlName","supplierStatus"],[3,"value",4,"ngFor","ngForOf"],[1,"category-code-mat-form-field"],["appearance","outline","color","primary",1,"w-100","rounded-end-0","relative-field"],["type","text","matInput","","placeholder","Generate Supplier Code","formControlName","supplierId",1,"cat-code-input"],["type","button","mat-raised-button","","color","primary",1,"create-cat-code-button",3,"click"],["matInput","","formControlName","address"],["matInput","","formControlName","supplierDescription"],["matInput","","formControlName","supplierBankBenificiaryName"],["matInput","","formControlName","supplierBankIfscCode"],["matInput","","formControlName","supplierBankName"],["matInput","","formControlName","supplierBankBranchName"],["matInput","","formControlName","supplierBankAccountNo"],["matInput","","formControlName","confirmBankAccountNo"],[1,"d-flex","justify-content-end","px-4","py-3"],["mat-raised-button","","type","submit","color","primary",3,"disabled"],[1,"d-flex","flex-column","align-items-start","file-uploader-container"],[1,"d-flex","flex-column","align-items-center","justify-content-center","upload-lable-text","btn",3,"click"],[1,"bi","bi-plus-square"],["for","inputGroupFile"],["type","file","accept",".jpg, .jpeg","hidden","",1,"form-control","file-upload-input","hidden",3,"change"],[1,"upload-lable-text","btn"],["alt","Image Preview","class","image-preview",3,"src",4,"ngIf"],[1,"text-end","delete-container"],[1,"bi","bi-x","delete-icon",3,"click"],["alt","Image Preview",1,"image-preview",3,"src"],[3,"value"]],template:function(e,r){e&1&&u(0,fi,131,11,"div",3),e&2&&d("ngIf",r.id=="add-supplier"||r.id=="edit-supplier")},dependencies:[N,Q,z,A,fe,ce,X,ue,R,U,ge,Se,Ie,T,ye,ve,De,k,V,F,J,_e,Ce,ze],styles:[".cat-code-input[_ngcontent-%COMP%]{padding-right:120px}.create-cat-code-button[_ngcontent-%COMP%]{position:absolute;top:50%;right:-16px;transform:translateY(-50%);height:100%;line-height:1;z-index:2;border-radius:0 2px 2px 0}.content-height[_ngcontent-%COMP%]{overflow:auto;max-height:60vh}.relative-field[_ngcontent-%COMP%]{position:relative}"]})};var _i=()=>[5,15,25,50,100],Ci=(i,t)=>({"status-button-active":i,"status-button-inactive":t});function hi(i,t){i&1&&(a(0,"th",46),l(1,"Sr. No."),n())}function gi(i,t){if(i&1&&(a(0,"td",47)(1,"p",48),l(2),n()()),i&2){let e=t.index;s(2),y(e+1)}}function Si(i,t){i&1&&(a(0,"th",46),l(1,"Supplier Name"),n())}function xi(i,t){if(i&1&&(a(0,"td",47)(1,"p",48),l(2),n()()),i&2){let e=t.$implicit;s(2),y(e.supplierName)}}function yi(i,t){i&1&&(a(0,"th",46),l(1,"Firm/Company"),n())}function vi(i,t){if(i&1&&(a(0,"td",47)(1,"p",48),l(2),n()()),i&2){let e=t.$implicit;s(2),y(e.supplierCompanyName)}}function Di(i,t){i&1&&(a(0,"th",46),l(1,"Supplier Id"),n())}function wi(i,t){if(i&1&&(a(0,"td",47)(1,"p",48),l(2),n()()),i&2){let e=t.$implicit;s(2),y(e.supplierId)}}function bi(i,t){i&1&&(a(0,"th",46),l(1,"Email Id"),n())}function Ei(i,t){if(i&1&&(a(0,"td",47)(1,"p",48),l(2),n()()),i&2){let e=t.$implicit;s(2),y(e.email)}}function Ii(i,t){i&1&&(a(0,"th",46),l(1,"Phone No."),n())}function Ti(i,t){if(i&1&&(a(0,"td",47)(1,"p",48),l(2),n()()),i&2){let e=t.$implicit;s(2),y(e.phone)}}function Mi(i,t){i&1&&(a(0,"th",46),l(1,"GST"),n())}function Ni(i,t){if(i&1&&(a(0,"td",47)(1,"p",48),l(2),n()()),i&2){let e=t.$implicit;s(2),y(e.gstNo)}}function Vi(i,t){i&1&&(a(0,"th",46),l(1,"PAN"),n())}function ki(i,t){if(i&1&&(a(0,"td",47)(1,"p",48),l(2),n()()),i&2){let e=t.$implicit;s(2),y(e.panNo)}}function Fi(i,t){i&1&&(a(0,"th",46),l(1,"Address"),n())}function Ai(i,t){if(i&1&&(a(0,"td",47)(1,"p",48),l(2),n()()),i&2){let e=t.$implicit;s(2),y(e.phone)}}function Li(i,t){i&1&&(a(0,"th",46),l(1,"City"),n())}function Oi(i,t){if(i&1&&(a(0,"td",47)(1,"p",48),l(2),n()()),i&2){let e=t.$implicit;s(2),y(e.city)}}function Ri(i,t){i&1&&(a(0,"th",46),l(1,"State"),n())}function Pi(i,t){if(i&1&&(a(0,"td",47)(1,"p",48),l(2),n()()),i&2){let e=t.$implicit;s(2),y(e.state)}}function Bi(i,t){i&1&&(a(0,"th",46),l(1,"Country"),n())}function qi(i,t){if(i&1&&(a(0,"td",47)(1,"p",48),l(2),n()()),i&2){let e=t.$implicit;s(2),y(e.country)}}function Gi(i,t){i&1&&(a(0,"th",49),l(1,"Created"),n())}function $i(i,t){if(i&1&&(a(0,"td",47)(1,"p",48),l(2),le(3,"date"),n()()),i&2){let e=t.$implicit;s(2),y(se(3,1,e.supplierAddDate,"dd/MM/yyyy"))}}function ji(i,t){i&1&&(a(0,"th",49),l(1,"Status"),n())}function Hi(i,t){if(i&1&&(a(0,"td",47)(1,"span",50),l(2),n()()),i&2){let e=t.$implicit;s(),d("ngClass",re(2,Ci,e.supplierStatus=="1",e.supplierStatus=="0")),s(),O(" ",e.supplierStatus=="1"?"Active":"InActive"," ")}}function Qi(i,t){i&1&&(a(0,"th",51),l(1,"Action"),n())}function zi(i,t){if(i&1){let e=D();a(0,"td",47)(1,"div",52)(2,"img",53),C("click",function(){let o=f(e).index,m=h();return _(m.editSupplier(o,"edit-supplier"))}),n(),a(3,"img",54),C("click",function(){let o=f(e).index,m=h();return _(m.deleteSupplier(o))}),n()()()}}function Ui(i,t){i&1&&p(0,"tr",55)}function Xi(i,t){i&1&&p(0,"tr",56)}function Wi(i,t){i&1&&(a(0,"tr",57)(1,"td",58),l(2,"No data matching the filter"),n()())}var Ue=class i{dialog=v(Ee);peoplesService=v(L);loader=v(G);cd=v(q);accordion;paginator;sort;suppliersDataSource=new qe;suppliersDisplayedColumns=["srNo","supplierName","supplierCompanyName","supplierId","email","phone","address","city","country","created","status","action"];panelOpenState=!1;suppliersData=[];constructor(){}ngOnInit(){}ngAfterViewInit(){this.suppliersDataSource.paginator=this.paginator,this.suppliersDataSource.sort=this.sort}filterApply(t){let e=t.target.value;this.suppliersDataSource.filter=e.trim().toLocaleLowerCase()}setValues(){this.getSupplierDetails()}getSupplierDetails(t){let e={supplierId:t};this.loader.startLoader(),this.peoplesService.getCustomerDetails(e).subscribe({next:r=>{this.loader.stopLoader(),console.log("Data",r?.data),Array.isArray(r?.data)?this.suppliersData=r?.data:this.suppliersData.some(m=>m.supplierCode==r?.data.supplierCode)||this.suppliersData.push(r?.data),console.log("suppliersData",this.suppliersData),console.log("suppliersDataSource",this.suppliersDataSource.data),this.suppliersDataSource.data=[...this.suppliersData]},error:r=>{this.loader.stopLoader(),this.cd.openErrorModal("CONNECTION_TIME_OUT","Error")}})}addSupplier(t){this.dialog.open(ie,{panelClass:"medium-dialog",autoFocus:!1,data:{id:t}}).afterClosed().subscribe(r=>{this.peoplesService?.supplierCast?.pipe(H()).subscribe(o=>{console.log("Data",o),Array.isArray(o)?this.suppliersData=o:this.suppliersData.some(c=>c.supplierCode==o.supplierCode)||this.suppliersData.push(o),console.log("suppliersData",this.suppliersData),console.log("suppliersDataSource",this.suppliersDataSource.data),this.loader.stopLoader(),this.cd.openSuccessModal("Successful !"),this.suppliersDataSource.data=[...this.suppliersData]})})}editSupplier(t,e){let r=this.suppliersData[t];this.dialog.open(ie,{panelClass:"medium-dialog",autoFocus:!1,data:{id:e,supplier:r,index:t}}).afterClosed().subscribe(m=>{this.peoplesService?.supplierCast?.pipe(H()).subscribe(c=>{this.suppliersData=[],Array.isArray(c)?this.suppliersData=c:this.suppliersData.some(j=>j.supplierCode==c.supplierCode)||this.suppliersData.push(c),this.suppliersDataSource.data[m.index]=c,this.suppliersDataSource._updateChangeSubscription(),this.loader.stopLoader(),this.cd.openSuccessModal("Successful !")})})}deleteSupplier(t){this.cd.openConfirmModal("Are you sure you want to delete this supplier?",()=>{this.suppliersData.splice(t,1),this.suppliersDataSource.data=[...this.suppliersData],this.suppliersDataSource._updateChangeSubscription()})}pdfDownload(){let t=new st,e=["Sr. No.","Supplier Name","Firm/Company","Supplier ID","Email ID","Phone No.","GST No.","PAN No.","Address","City","State","Country","Created Date","Status"],r=this.suppliersDataSource.data.map((o,m)=>[m+1,o.supplierName,o.supplierCompanyName,o.supplierId,o.email,o.phone,o.gstNo,o.panNo,o.address,o.city,o.state,o.country,o.supplierAddDate,o.supplierStatus==="1"?"Active":"Inactive"]);mt(t,{head:[e],body:r}),t.save("Suppliers.pdf")}excelDownload(){let t=Ge.json_to_sheet(this.suppliersDataSource.data),e=Ge.book_new();Ge.book_append_sheet(e,t,"Suppliers"),pt(e,"Suppliers.xlsx")}print(){let t=document.querySelector(".supplier-table-container")?.innerHTML,e=window.open("","","width=800,height=600");e&&t&&(e.document.write(`<html><head><title>Print</title></head><body>${t}</body></html>`),e.document.close(),e.print())}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=M({type:i,selectors:[["app-suppliers"]],viewQuery:function(e,r){if(e&1&&(w(T,5),w(P,5),w(B,5)),e&2){let o;b(o=E())&&(r.accordion=o.first),b(o=E())&&(r.paginator=o.first),b(o=E())&&(r.sort=o.first)}},decls:81,vars:7,consts:[["input",""],[1,"cardWithShadow"],[1,"section-card","rounded","p-3"],[1,"d-flex","align-items-center","justify-content-between"],[1,"p-2"],[1,"f-16","medium-font"],[1,"breadcrumb-icon"],["src","/assets/images/supplier.svg","alt","breadcrumb"],[1,"supplier-table-container"],[1,"d-flex","flex-wrap","align-items-center","justify-content-between","mt-3"],[1,"col-12","col-md-6","col-lg-6","col-xl-6","mb-2"],["appearance","outline",1,"w-100"],["matInput","","placeholder","Search Supplier Name, Email Id, Phone No. etc",3,"keyup"],["matSuffix","",1,"search-icon-color"],[1,"d-flex","flex-wrap","justify-content-md-end"],["mat-raised-button","",1,"mx-1","my-1",3,"click"],[1,"bi","bi-filetype-pdf","f-20","text-danger"],[1,"bi","bi-filetype-xls","f-20","text-success"],[1,"bi","bi-printer","f-20","text-primary"],["mat-raised-button","","color","primary",1,"mx-1","my-1",3,"click"],[1,"common-custom-expansion","my-3"],[1,""],["mat-table","","matSort","","matSortDirection","desc","mat-table-auto-rows","",1,"",3,"dataSource"],["matColumnDef","srNo"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","supplierName"],["matColumnDef","supplierCompanyName"],["matColumnDef","supplierId"],["matColumnDef","email"],["matColumnDef","phone"],["matColumnDef","gstNo"],["matColumnDef","panNo"],["matColumnDef","address"],["matColumnDef","city"],["matColumnDef","state"],["matColumnDef","country"],["matColumnDef","created"],["mat-header-cell","","mat-sort-header","","mat-sort-header","",4,"matHeaderCellDef"],["matColumnDef","status"],["matColumnDef","action"],["mat-header-cell","","mat-sort-header","","class","sticky-action-column",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],[3,"length","pageSize","pageSizeOptions"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],[1,"m-0"],["mat-header-cell","","mat-sort-header","","mat-sort-header",""],[3,"ngClass"],["mat-header-cell","","mat-sort-header","",1,"sticky-action-column"],[1,"d-flex","justify-content-center","align-items-center","gap-2"],["src","./assets/icons/dwnld_icons/icon_edit.svg","alt","edit-icon",1,"action-icon",3,"click"],["src","./assets/icons/dwnld_icons/icon_delete.svg","alt","delete-icon",1,"action-icon",3,"click"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","4",1,"mat-cell"]],template:function(e,r){if(e&1){let o=D();a(0,"mat-card",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"h1"),l(5,"Suppliers"),n(),a(6,"p",5),l(7,"Manage your suppliers"),n()(),a(8,"div",6),p(9,"img",7),n()()(),a(10,"div",8)(11,"div",9)(12,"div",10)(13,"mat-form-field",11)(14,"mat-label"),l(15,"Search"),n(),a(16,"input",12,0),C("keyup",function(c){return f(o),_(r.filterApply(c))}),n(),a(18,"mat-icon",13),l(19,"search"),n()()(),a(20,"div",14)(21,"button",15),C("click",function(){return f(o),_(r.pdfDownload())}),p(22,"i",16),n(),a(23,"button",15),C("click",function(){return f(o),_(r.excelDownload())}),p(24,"i",17),n(),a(25,"button",15),C("click",function(){return f(o),_(r.print())}),p(26,"i",18),n(),a(27,"button",19),C("click",function(){return f(o),_(r.addSupplier("add-supplier"))}),l(28," Add Supplier "),n()()(),a(29,"div",20)(30,"div",21)(31,"table",22),S(32,23),u(33,hi,2,0,"th",24)(34,gi,3,1,"td",25),x(),S(35,26),u(36,Si,2,0,"th",24)(37,xi,3,1,"td",25),x(),S(38,27),u(39,yi,2,0,"th",24)(40,vi,3,1,"td",25),x(),S(41,28),u(42,Di,2,0,"th",24)(43,wi,3,1,"td",25),x(),S(44,29),u(45,bi,2,0,"th",24)(46,Ei,3,1,"td",25),x(),S(47,30),u(48,Ii,2,0,"th",24)(49,Ti,3,1,"td",25),x(),S(50,31),u(51,Mi,2,0,"th",24)(52,Ni,3,1,"td",25),x(),S(53,32),u(54,Vi,2,0,"th",24)(55,ki,3,1,"td",25),x(),S(56,33),u(57,Fi,2,0,"th",24)(58,Ai,3,1,"td",25),x(),S(59,34),u(60,Li,2,0,"th",24)(61,Oi,3,1,"td",25),x(),S(62,35),u(63,Ri,2,0,"th",24)(64,Pi,3,1,"td",25),x(),S(65,36),u(66,Bi,2,0,"th",24)(67,qi,3,1,"td",25),x(),S(68,37),u(69,Gi,2,0,"th",38)(70,$i,4,4,"td",25),x(),S(71,39),u(72,ji,2,0,"th",38)(73,Hi,3,5,"td",25),x(),S(74,40),u(75,Qi,2,0,"th",41)(76,zi,4,0,"td",25),x(),u(77,Ui,1,0,"tr",42)(78,Xi,1,0,"tr",43)(79,Wi,3,0,"tr",44),n()(),p(80,"mat-paginator",45),n()()()}e&2&&(s(31),d("dataSource",r.suppliersDataSource),s(46),d("matHeaderRowDef",r.suppliersDisplayedColumns),s(),d("matRowDefColumns",r.suppliersDisplayedColumns),s(2),d("length",100)("pageSize",5)("pageSizeOptions",oe(6,_i)))},dependencies:[N,me,pe,A,R,xe,k,V,W,Y,F,P,B,Te,Me,Ve,Le,ke,Ne,Oe,Fe,Ae,Re,Pe,Be],styles:[".supplier-table-container[_ngcontent-%COMP%]     .mat-mdc-form-field-subscript-wrapper.mat-mdc-form-field-bottom-align{display:none!important}"]})};var Na=[{path:"",component:te},{path:"customers",component:te},{path:"suppliers",component:Ue}];export{Na as routes};
